<!DOCTYPE html>
<html ng-app="app"><!-- js側で定義してたappモジュールを利用できる -->
<head>
	<meta charset="UTF-8">
	<title>angular</title>
	<script type="text/javascript" src="./js/angular.js"></script>
	<script type="text/javascript" src="./js/app2.js"></script>
	</head>
<body>
	<h1>module</h1>
	<p>関数やオブジェクトをグループ化して管理すること</p>
	<p>ディレクティブ、サービス、フィルター
	コントローラなどすべてモジュール機能によって管理されている
	モジュール機能を利用することで名前の衝突を避け、部品の再利用性も向上している
	テスト実行時には無関係なモジュールを読み込まず、初期化時間の短縮できるメリットもある
	Angular.js向けのサードバーティ製ライブラリもモジュールで管理されているためライブラリを利用する際は依存関係に
	モジュールを追加するだけ
	</p>

	<script>
		var app = angular.module('myapp',[]);//第二引数に依存モジュールを指定すると新しいモジュールが作成できる。依存するモジュールがない場合でもモジュール作成にはrequiresを必ず指定する

		//requiresを指定しない場合、angular.moduleを呼び出すと先ほど作成したモジュールを取得する
		var app = angular.module('myapp');
		//指定せずにまだ作成していないモジュールを呼び出すと例外が投げられる
		var app = angular.module('notExistsApp');
		//同じ名前は上書きされる
		var app1 = angular.module('myapp', []);
		var app2 = angular.module('myapp', []);
	</script>
	<h2>モジュールへのサービスの登録</h2>
	Module#value//モジュールに関数やオブジェクトを登録するメソッド。登録されると他のコードから参照可能になる
	Module#constant
	Module#factory
	Module#service
	Module#provider
	Module#controller
	Module#directive
	Module#animation

	<script>
		angular.module('app1', [])
		.value('AdditionService',function(a,b){
			return a + b;
		});
		//angular.moduleの戻り値を一旦変数に格納してから登録することも可能
		var app2 = angular.module('app2',[]);
		app2.value('AdditionService',function(a,b){
			return a + b;
		});


		//アプリ規模によってはモジュール作成処理とサービスの登録処理を別々の箇所に記述することも可能
		//1))
		angular.module('app3', []);
		//2))
		angular.module('app3')
		.value('AdditionService',function(a,b){
			return a + b;
		})


		//angular.valueメソッドの戻り値はModuleのインスタンスであるのでメソッドチェーンで記述することもできる
		angular.module('app4',[])
		.value('AdditionService', function(a,b){
			return a + b;
		})
		.value('SubtractionService',function(a,b){
			return a - b;
		});
	</script>
	<h2>依存関係の定義</h2>
	<script>
		//myLibモジュールに登録したサービスがmyAppモジュールに登録したサービスから利用可能になる
		angular.module('myLib',[]);
		angular.module('myApp',['myLib']);
	</script>
	<h2>モジュールの依存関係の記述例</h2>
	<script>
	angula.module('myLib',[])
	.filter('MyFilter',function(){
		//フィルターの実装
	})
	.directive('MyDirective',function(){
		//ディレクティブの実装
	});
	angular.module('myApp',['ngResource','myLib'])
	.service('MyService',function(){
		//サービスの実装
	})
	.controller('MyController',function(){
		//コントローラー
	});
	</script>
</body>
</html>
