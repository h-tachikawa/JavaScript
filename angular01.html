<!DOCTYPE html>
<html><!-- js側で定義してたappモジュールを利用できる -->
<head>
	<meta charset="UTF-8">
	<title>angular</title>
	<script type="text/javascript" src="./js/angular.js"></script>
	<script type="text/javascript" src="./js/app2.js"></script>
	<style>
		li.closed-true .title{
			color: gray;
			text-decoration: line-through;
		}
	</style>
</head>
<body>
	<div ng-app="taskApp">
		<div ng-controller="TaskCtrl">
			<h1>{{conf.appName}}</h1>
			<form ng-submit="addTask()">
				<input type="text" ng-model="taskTitle" placehodler="タスクを入力してください">
				<span>{{error}}</span>
				</ul>
			</form>
			<ul clas="taskList">
				<li ng-repeat="task in tasks" class="closed-{{task.closed}}">
					<input type="checkbox" ng-model="task.closed">
					<span class="title">{{task.title}}</span>
					<a ng-click="delTask($event,$index)" href="#">x</a>
				</li>
			</ul>
			<button class="clear" ng-click="delAllTask()">全て削除</button>
		</div>
	</div>
	<script>
		var taskApp = angular.module('taskApp',[]);
		taskApp.controller('TaskCtrl',function($scope){
			$scope.conf = {
				appName : 'TODO'
			}
			$scope.tasks = [];
			$scope.addTask = function(){
				if(!$scope.taskTitle.length){
					$scope.error = 'タスクが入力されていません!'
					return;
				}
				$scope.tasks.push({
					title : $scope.taskTitle,
					closed: false
				});
				$scope.taskTitle = '';
				$scope.error = '';
			},
			$scope.delTask = function($event,$index){
				$event.preventDefault();
				$scope.tasks.splice($index,1)
			},
			$scope.delAllTask = function(){
				if(confirm('タスクを全て削除しますか?')){
				$scope.tasks = [];
				}
			}
		})
	</script>
</body>
</html>
