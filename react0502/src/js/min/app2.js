var generateId=function(){var e=0;return function(){return"_"+e++}}(),todos=[{id:generateId(),name:"Buy some milk"},{id:generateId(),name:"Birthday present to Alice"}],TodoStorage={on:function(e,t){this._onChangeCallback=t},getAll:function(e){e(todos)},complete:function(e){for(var t=0;t<todos.length;t++){var n=todos[t];if(n.id===e){var a=React.addons.update(n,{done:{$set:!0}});todos=React.addons.update(todos,{$splice:[[t,1,a]]}),this._onChangeCallback();break}}},create:function(e,t){var n={id:generateId(),name:e};todos=React.addons.update(todos,{$push:[n]}),this._onChangeCallback(),t()}},Todo=React.createClass({displayName:"Todo",handleClick:function(){TodoStorage.complete(this.props.todo.id)},render:function(){var e=this.props.todo,t=e.done?null:React.createElement("button",{onClick:this.handleClick},"Done");return React.createElement("li",null,e.name,t)}}),TodoForm=React.createClass({displayName:"TodoForm",getInitialState:function(){return{name:""}},handleNameChange:function(e){this.setState({name:e.target.value})},handleSubmit:function(e){e.preventDefault();var t=this.state.name.trim();TodoStorage.create(t,function(){this.setState({name:""})}.bind(this))},render:function(){var e=this.state.name.trim().length<=0;return React.createElement("form",{onSubmit:this.handleSubmit},React.createElement("input",{value:this.state.name,onChange:this.handleNameChange}),React.createElement("input",{type:"submit",disabled:e}))}}),TodoList=React.createClass({displayName:"TodoList",render:function(){var e=this.props.todos.filter(function(e){return!e.done}).map(function(e){return React.createElement(Todo,{key:e.id,todo:e})});return React.createElement("div",{className:"active-todos"},React.createElement("h2",null,"Active"),React.createElement("ul",null,e),React.createElement(TodoForm,null))}}),App=React.createClass({displayName:"App",getInitialState:function(){return{todos:[]}},componentDidMount:function(){var e=function(){TodoStorage.getAll(function(e){this.setState({todos:e})}.bind(this))}.bind(this);TodoStorage.on("change",e),e()},render:function(){return React.createElement("div",null,React.createElement("h1",null,"My Todo"),React.createElement(TodoList,{todos:this.state.todos}))}});React.render(React.createElement(App,null),document.getElementById("app-container"));