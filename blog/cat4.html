<h3> ある日僕は猫にjavascriptを教えることになった第4話(文字列の連結と未定義)</h3>

<img src="http://kenjimorita.jp/wp-content/uploads/2016/03/banner1.gif" alt="ある日僕は猫にjavascriptを教えることになった" width="900" height="450" class="size-full wp-image-9380" />

前回までのあらすじ
<p>
ある日僕の飼っている猫「にゃーちゃん」がjavascriptを覚えたいっていうんだ。 javascript？javascriptってのはプログラミング言語なんだけど、なんでにゃーちゃんが教えて欲しいのかは まだよく分かっていないんだ。 とりあえずほっぺた舐められちゃったから「しょーがないな、、」って感じで教えているんだよ。 僕も猫に教えたことはないからゆっくり丁寧に教えているつもりだよ。
</p>
<strong>前回までの話</strong>

<a href="http://kenjimorita.jp/catjs1/">ある日僕は猫にjavascriptを教えることになった第1話</a>

<a href="http://kenjimorita.jp/catjs2/">ある日僕は猫にjavascriptを教えることになった第2話(実際に書いてみよう)</a>

<a href="http://kenjimorita.jp/catjs3/">ある日僕は猫にjavascriptを教えることになった第3話(変数の中身を出力する)</a>

<h3>ある日僕は猫にjavascriptを教えることになった第4話(文字列の連結と未定義)</h3>

<!--more-->
にゃーちゃん<a href="http://kenjimorita.jp/catjs3/">前回の続き</a>からやるよ？？忘れちゃったら戻ってね。にゃーちゃんどうしたの？そんな変な顔して。
<span class="catsay"><a href="http://kenjimorita.jp/wp-content/uploads/2016/03/cat.gif"><img src="http://kenjimorita.jp/wp-content/uploads/2016/03/cat.gif" alt="猫jsのにゃーちゃん" width="30" height="30" class="alignnone size-full wp-image-9379" /></a>この前向かいの家の台所にお魚が置いてあったにゃー。</span>
うん
<span class="catsay"><a href="http://kenjimorita.jp/wp-content/uploads/2016/03/cat.gif"><img src="http://kenjimorita.jp/wp-content/uploads/2016/03/cat.gif" alt="猫jsのにゃーちゃん" width="30" height="30" class="alignnone size-full wp-image-9379" /></a > ちょっと高いテーブルにあったからまず椅子にジャンプして、でテーブルにのっかったんだにゃー </span>
    うん
    <span class="catsay"><a href="http://kenjimorita.jp/wp-content/uploads/2016/03/cat.gif"> <img src="http://kenjimorita.jp/wp-content/uploads/2016/03/cat.gif" alt="猫jsのにゃーちゃん" width="30" height="30" class="alignnone size-full wp-image-9379" /></a > でお魚をこっちへこいこっちへこいやって、 </span>
    うん
    <span class="catsay"><a href="http://kenjimorita.jp/wp-content/uploads/2016/03/cat.gif"> <img src="http://kenjimorita.jp/wp-content/uploads/2016/03/cat.gif" alt="猫jsのにゃーちゃん" width="30" height="30" class="alignnone size-full wp-image-9379" /></a > あれなんていうんだ。ピカピカ透明のシートが掛かっていてさ、</span>

    ラップだね。うん
    <span class="catsay"><a href="http://kenjimorita.jp/wp-content/uploads/2016/03/cat.gif"> <img src="http://kenjimorita.jp/wp-content/uploads/2016/03/cat.gif" alt="猫jsのにゃーちゃん" width="30" height="30" class="alignnone size-full wp-image-9379" /></a > どーにもそれが難儀難儀だにゃ</span>
      うん。
    <span class="catsay"><a href="http://kenjimorita.jp/wp-content/uploads/2016/03/cat.gif"> <img src="http://kenjimorita.jp/wp-content/uploads/2016/03/cat.gif" alt="猫jsのにゃーちゃん" width="30" height="30" class="alignnone size-full wp-image-9379" /></a > 普段だと、わたくしの爪がこー、お魚にこー引っかかって、こっちにくるにゃー、 </span>
    うん
    <span class="catsay"><a href="http://kenjimorita.jp/wp-content/uploads/2016/03/cat.gif"> <img src="http://kenjimorita.jp/wp-content/uploads/2016/03/cat.gif" alt="猫jsのにゃーちゃん" width="30" height="30" class="alignnone size-full wp-image-9379" /></a >今日という今日は、透明のシートで、、</span>
      うん
    <span class="catsay"><a href="http://kenjimorita.jp/wp-content/uploads/2016/03/cat.gif"> <img src="http://kenjimorita.jp/wp-content/uploads/2016/03/cat.gif" alt="猫jsのにゃーちゃん" width="30" height="30" class="alignnone size-full wp-image-9379" /></a >お皿全体はくるけど</span>
    うん
    <span class="catsay"><a href="http://kenjimorita.jp/wp-content/uploads/2016/03/cat.gif"> <img src="http://kenjimorita.jp/wp-content/uploads/2016/03/cat.gif" alt="猫jsのにゃーちゃん" width="30" height="30" class="alignnone size-full wp-image-9379" /></a > ピカピカ透明がなかなかはがれないにゃー </span>
    うん
    <span class="catsay"><a href="http://kenjimorita.jp/wp-content/uploads/2016/03/cat.gif"> <img src="http://kenjimorita.jp/wp-content/uploads/2016/03/cat.gif" alt="猫jsのにゃーちゃん" width="30" height="30" class="alignnone size-full wp-image-9379" /></a > 諦めたにゃー </span>
    にゃーちゃん。
    <span class="catsay"><a href="http://kenjimorita.jp/wp-content/uploads/2016/03/cat.gif"> <img src="http://kenjimorita.jp/wp-content/uploads/2016/03/cat.gif" alt="猫jsのにゃーちゃん" width="30" height="30" class="alignnone size-full wp-image-9379" /></a > にゃ？ </span>

    勉強しようか？
    <span class="catsay"><a href="http://kenjimorita.jp/wp-content/uploads/2016/03/cat.gif"> <img src="http://kenjimorita.jp/wp-content/uploads/2016/03/cat.gif" alt="猫jsのにゃーちゃん" width="30" height="30" class="alignnone size-full wp-image-9379" /></a > にゃー！！</span>


前回は変数を代入してnameを参照したらniboshiと出力された
<div class="code" style="background:#efefef;padding:10px;margin:10px 0;">
  var name = "niboshi";
  name;//"niboshi"
</div>

<span class="catsay"><a href="http://kenjimorita.jp/wp-content/uploads/2016/03/cat.gif"><img src="http://kenjimorita.jp/wp-content/uploads/2016/03/cat.gif" alt="猫jsのにゃーちゃん" width="30" height="30" class="alignnone size-full wp-image-9379" /></a > にゃーにゃー </span>
今回は文字列の結合をやるよ
<span class="catsay"><a href="http://kenjimorita.jp/wp-content/uploads/2016/03/cat.gif"><img src="http://kenjimorita.jp/wp-content/uploads/2016/03/cat.gif" alt="猫jsのにゃーちゃん" width="30" height="30" class="alignnone size-full wp-image-9379" /></a > 文字列の結合?? </span>
ちょっと書いてみよう
<a class="jsbin-embed" href="http://jsbin.com/gocujazedo/1/embed?console">JS Bin on jsbin.com</a><script src="http://static.jsbin.com/js/embed.min.js?3.35.12"></script>
<div class="code" style="background:#efefef;padding:10px;margin:10px 0;">
  var name = "niboshi";
  name + "san";
</div>


この2行目の「+」は演算子(えんざんし)といって簡単にいうとこの右と左を足しているよ。

<span class="catsay"><a href="http://kenjimorita.jp/wp-content/uploads/2016/03/cat.gif"><img src="http://kenjimorita.jp/wp-content/uploads/2016/03/cat.gif" alt="猫jsのにゃーちゃん" width="30" height="30" class="alignnone size-full wp-image-9379" /></a > 算数と一緒かにゃ？？ </span>

そうだね。その計算(評価)したものが

<div class="code" style="background:#efefef;padding:10px;margin:10px 0;">
  var name = "niboshi";
  name + "san";
  //"niboshisan"
</div>

だよ。
ここではnameという中身("niboshi")に対して足しているところを確認してね？？

<span class="catsay"><a href="http://kenjimorita.jp/wp-content/uploads/2016/03/cat.gif"><img src="http://kenjimorita.jp/wp-content/uploads/2016/03/cat.gif" alt="猫jsのにゃーちゃん" width="30" height="30" class="alignnone size-full wp-image-9379" /></a > うん。わかったんだけどなんで </span>

<div class="code" style="background:#efefef;padding:10px;margin:10px 0;">
var name = "niboshi";
var name + "san";
name
</div>
<span class="catsay"><a href="http://kenjimorita.jp/wp-content/uploads/2016/03/cat.gif"><img src="http://kenjimorita.jp/wp-content/uploads/2016/03/cat.gif" alt="猫jsのにゃーちゃん" width="30" height="30" class="alignnone size-full wp-image-9379" /></a > こうじゃないにゃ？？ </span>

varっていうのは新たに変数を宣言するためのキーワードだったよね？？

にゃーちゃんの指摘した下のこの意味だと
<div class="code" style="background:#efefef;padding:10px;margin:10px 0;">
var name = "niboshi";//①新たな変数nameに"niboshi"を入れる
var name + "san";//②新たな変数nameに"san"を加算したい。
</div>
って書いていることとなるんだよ。

<span class="catsay"><a href="http://kenjimorita.jp/wp-content/uploads/2016/03/cat.gif"><img src="http://kenjimorita.jp/wp-content/uploads/2016/03/cat.gif" alt="猫jsのにゃーちゃん" width="30" height="30" class="alignnone size-full wp-image-9379" /></a > 同じ名前の変数を宣言しているにゃ？？ </span>
そうなんだ。同じ変数名を宣言することは好ましくないけどできなくはないんだけど、中身が何か考えて欲しいんだ。

②のvar name でまた初期化していることになるんだよ。

<span class="catsay"><a href="http://kenjimorita.jp/wp-content/uploads/2016/03/cat.gif"><img src="http://kenjimorita.jp/wp-content/uploads/2016/03/cat.gif" alt="猫jsのにゃーちゃん" width="30" height="30" class="alignnone size-full wp-image-9379" /></a > 初期化ってなんにゃ？？ </span>
簡単にいうと「最初の中身の状態」を決めることだよ。
これは②の時点でまだ何も入っていないnameに+で足そうとしているので「エラー」なんだよ。

<span class="catsay"><a href="http://kenjimorita.jp/wp-content/uploads/2016/03/cat.gif"><img src="http://kenjimorita.jp/wp-content/uploads/2016/03/cat.gif" alt="猫jsのにゃーちゃん" width="30" height="30" class="alignnone size-full wp-image-9379" /></a > エラー？？ </span>
エラー。
"Unexpected token +"
なぜエラーかというと、
var name = 1
これは1が入っているでしょ？

<span class="catsay"><a href="http://kenjimorita.jp/wp-content/uploads/2016/03/cat.gif"><img src="http://kenjimorita.jp/wp-content/uploads/2016/03/cat.gif" alt="猫jsのにゃーちゃん" width="30" height="30" class="alignnone size-full wp-image-9379" /></a > にゃーにゃー </span>
かたや
<div class="code">
  var name;
</div>
だけだと未定義(この場合nameとは何かを「定義されていない」)とされて、undefinedっていうものが入っているんだ。
なので簡単に言うと「そこで使う+はそこでは変じゃないですか？？」っていうエラーメッセージが出ている。

ここは重要なところだから試しに新たな変数
<div class="code">
var fafa;
</div>
とだけ書いて出力してみようか！
<span class="catsay"><a href="http://kenjimorita.jp/wp-content/uploads/2016/03/cat.gif"><img src="http://kenjimorita.jp/wp-content/uploads/2016/03/cat.gif" alt="猫jsのにゃーちゃん" width="30" height="30" class="alignnone size-full wp-image-9379" /></a > にゃー </span>
<div class="code" style="background:#efefef;padding:10px;margin:10px 0;">
  var fafa;
  fafa;
</div>
とだけ書いてEnterおして？？
<span class="catsay"><a href="http://kenjimorita.jp/wp-content/uploads/2016/03/cat.gif"><img src="http://kenjimorita.jp/wp-content/uploads/2016/03/cat.gif" alt="猫jsのにゃーちゃん" width="30" height="30" class="alignnone size-full wp-image-9379" /></a > 本当だundefinedが返ってくるにゃ！ </span>
その意味はjavascriptはfafaを参照したけど中身がないから、
どこかにある(定義されている)んじゃないかと思って探したけどなかった。なのでundefinedが出力されるんだよ。

じゃあ戻ると、さっきの質問のコードは、
<div class="code">
  var name + "san";
</div>

何も入っていない変数に+で加算しようとしている。
つまり
<div class="code">
undefined + "san"
</div>
内部でこう解釈されて、エラーになるんだよ。
まとめると、

<div class="code" style="background:#efefef;padding:10px;margin:10px 0;">
//①
var name = "niboshi";
name + "san";
name //"niboshisan"

//②
var name = "niboshi";
var name + "san";//"Unexpected token +"
name
</div>
①と②の違いは
①はnameを参照した行の時には中身(niboshi)が入っている。そこに"san"が足されて
"niboshi" + "san";
nameと最後の行で参照したときに"niboshisan"が出力される

2のほうは
varで同じ変数を宣言した際に初期化されてundefinedという中身が入っていないことを示す「未定義」が入っている。
何も入っていないのに"san"を足そうとしているからError


今日はこれだけ覚えようか！！

にゃーちゃんはこれからどこか行くの？？
<span class="catsay"><a href="http://kenjimorita.jp/wp-content/uploads/2016/03/cat.gif"><img src="http://kenjimorita.jp/wp-content/uploads/2016/03/cat.gif" alt="猫jsのにゃーちゃん" width="30" height="30" class="alignnone size-full wp-image-9379" /></a > 行くにゃーー！！ </span>
どこいくの？？
<span class="catsay"><a href="http://kenjimorita.jp/wp-content/uploads/2016/03/cat.gif"><img src="http://kenjimorita.jp/wp-content/uploads/2016/03/cat.gif" alt="猫jsのにゃーちゃん" width="30" height="30" class="alignnone size-full wp-image-9379" /></a > お友達猫誘って岩盤浴だにゃー！ </span>
にゃーちゃんは美意識高いね〜




<strong>前回までの話</strong>

<a href="http://kenjimorita.jp/catjs1/">ある日僕は猫にjavascriptを教えることになった第1話</a>
<a href="http://kenjimorita.jp/catjs2/">ある日僕は猫にjavascriptを教えることになった第2話(実際に書いてみよう)</a>
<a href="http://kenjimorita.jp/catjs3/">ある日僕は猫にjavascriptを教えることになった第3話(変数の中身を出力する)</a>






じゃあ違う問題。
これの出力はなんだと思う？

<div class="code" style="background:#efefef;padding:10px;margin:10px 0;">
  var number = 1;
  number + 2;
</div>

3？？

そうなんだよ

変数numberには1が入っているから

1 + 2

は3だよ
でも先程と違うのはこの式は
数値 + 数値　だから
結果は3という「数値」なんだよ
これをNumber型(ナンバー型)っていうよ。

型ってなんにゃー？

型。文字列をstring型(ストリング型)といって数値を(ナンバー型)というよ。
今は「""」や「’’」で囲まれたものをstring型というと覚えておいていいよ。
で数字はNumber型で。

じゃあこれは？
"3"

「ストリングがた」にゃ？？

そうこれはString型だよ。数字の顔しているけどね。
他にもいろいろな型があるけどおいおい教えるね？？

にゃーー

じゃあこれはどうだい？？

var number = 1;
number += 3

わからないにゃー。これはいったい何をしているにゃ？？

これは「加算代入」といって上の意味は
number = number + 3
という意味だよ。

にゃ？？

実際何が行われているかというと
var number = 1;//
number = number + 3

number + 3　を計算した後同じnumberという変数に戻しているんだ。

これを
number += 3
という風に書くことができる。

ふむふむ



じゃあ次の問題。これの出力は何だと思う？？
<div class="code" style="background:#efefef;padding:10px;margin:10px 0;">
  var number = 1;
    number += "desu";
</div>

えーと
+=　は「左辺の変数に予め+してから戻す」意味だから、、、実際はこうで、、
var number = number + "desu";
↓
んで、右辺の計算が、
number + "desu"
↓
1 + "desu"だから

？？

1 + "desu"
って計算できるのかにゃ？？

今までは数値 + 数値だから結果もナンバー型
文字列 + 文字列だから結果もストリング型だったね
今度は数値 + 文字列だよ。

1というnumber型と"desu"というstring型

これはね文字列として計算されるんだよ。

なんでにゃー！！

これは「暗黙の型変換」が行われている為だよ。

だから右辺は
"1desu"
となって
それをnumberっていう変数に入れなおすから


<div class="code" style="background:#efefef;padding:10px;margin:10px 0;">
  var number = 1;
    number += "desu";
    //"1desu"
</div>
出力結果は"1desu"となるんだ。

むずいにゃ

次は違う計算をしたりしてもうちょっと慣れようか！

にゃーー




じゃあ今日もここか直接下のやつに書いていこうか
<a class="jsbin-embed" href="http://jsbin.com/kohageguhe/embed?console">JS Bin on jsbin.com</a><script src="http://static.jsbin.com/js/embed.min.js?3.35.11"></script>





ここまで理解したら今日はおしまいにしようか？ <span class="catsay"<a href="http://kenjimorita.jp/wp-content/uploads/2016/03/cat.gif"><img src="http://kenjimorita.jp/wp-content/uploads/2016/03/cat.gif" alt="猫jsのにゃーちゃん" width="30" height="30" class="alignnone size-full wp-image-9379" /></a> にゃー </span> にゃーちゃんアイスたべる？？ <span class="catsay"><a href="http://kenjimorita.jp/wp-content/uploads/2016/03/cat.gif"><img src="http://kenjimorita.jp/wp-content/uploads/2016/03/cat.gif" alt="猫jsのにゃーちゃん" width="30" height="30" class="alignnone size-full wp-image-9379" /></a> にゃーにゃー </span>
 [1]: http://kenjimorita.jp/catjs3/
 [2]: http://jsbin.com/lujufufaze/1/edit?console
 [3]: http://kenjimorita.jp/wp-content/uploads/2016/03/cat-2.gif
